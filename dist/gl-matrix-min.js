/*!
@fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 3.3.0

Copyright (c) 2015-2021, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).glMatrix={})}(this,(function(t){"use strict";var n;!function(t){t.min=function(t,n){return t<n?t:n},t.max=function(t,n,r){var a=Math.max(n,r);return Math.max(t,a)}}(n||(n={}));var r=1e-6,a=Math.random;var u=Math.PI/180;var e=Object.freeze({__proto__:null,EPSILON:r,RANDOM:a,ANGLE_ORDER:"zyx",setMatrixArrayType:function(t){throw new Error("Not implemented yet")},toRadian:function(t){return t*u},equals:function(t,a){return Math.abs(t-a)<=r*n.max(1,Math.abs(t),Math.abs(a))}});function o(t,n,r){var a=n[0],u=n[1],e=n[2],o=n[3],i=r[0],c=r[1],s=r[2],f=r[3];return t[0]=a*i+e*c,t[1]=u*i+o*c,t[2]=a*s+e*f,t[3]=u*s+o*f,t}function i(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t}var c=o,s=i,f=Object.freeze({__proto__:null,create:function(){var t=new Float64Array(4);return t[1]=0,t[2]=0,t[0]=1,t[3]=1,t},clone:function(t){var n=new Float64Array(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},fromValues:function(t,n,r,a){var u=new Float64Array(4);return u[0]=t,u[1]=n,u[2]=r,u[3]=a,u},set:function(t,n,r,a,u){return t[0]=n,t[1]=r,t[2]=a,t[3]=u,t},transpose:function(t,n){if(t===n){var r=n[1];t[1]=n[2],t[2]=r}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t},invert:function(t,n){var r=n[0],a=n[1],u=n[2],e=n[3],o=r*e-u*a;return o?(o=1/o,t[0]=e*o,t[1]=-a*o,t[2]=-u*o,t[3]=r*o,t):null},adjoint:function(t,n){var r=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=r,t},determinant:function(t){return t[0]*t[3]-t[2]*t[1]},multiply:o,rotate:function(t,n,r){var a=n[0],u=n[1],e=n[2],o=n[3],i=Math.sin(r),c=Math.cos(r);return t[0]=a*c+e*i,t[1]=u*c+o*i,t[2]=a*-i+e*c,t[3]=u*-i+o*c,t},scale:function(t,n,r){var a=n[0],u=n[1],e=n[2],o=n[3],i=r[0],c=r[1];return t[0]=a*i,t[1]=u*i,t[2]=e*c,t[3]=o*c,t},fromRotation:function(t,n){var r=Math.sin(n),a=Math.cos(n);return t[0]=a,t[1]=r,t[2]=-r,t[3]=a,t},fromScaling:function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t},str:function(t){return"mat2("+t[0].toString()+", "+t[1].toString()+", "+t[2].toString()+", "+t[3].toString()+")"},frob:function(t){return n.hypot(t[0],t[1],t[2],t[3])},LDU:function(t,n,r,a){return t[2]=a[2]/a[0],r[0]=a[0],r[1]=a[1],r[3]=a[3]-t[2]*r[1],[t,n,r]},add:function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t},subtract:i,exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},equals:function(t,a){var u=t[0],e=t[1],o=t[2],i=t[3],c=a[0],s=a[1],f=a[2],h=a[3];return Math.abs(u-c)<=r*n.max(1,Math.abs(u),Math.abs(c))&&Math.abs(e-s)<=r*n.max(1,Math.abs(e),Math.abs(s))&&Math.abs(o-f)<=r*n.max(1,Math.abs(o),Math.abs(f))&&Math.abs(i-h)<=r*n.max(1,Math.abs(i),Math.abs(h))},multiplyScalar:function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t},multiplyScalarAndAdd:function(t,n,r,a){return t[0]=n[0]+r[0]*a,t[1]=n[1]+r[1]*a,t[2]=n[2]+r[2]*a,t[3]=n[3]+r[3]*a,t},mul:c,sub:s});function h(t,n,r){var a=n[0],u=n[1],e=n[2],o=n[3],i=n[4],c=n[5],s=r[0],f=r[1],h=r[2],M=r[3],l=r[4],v=r[5];return t[0]=a*s+e*f,t[1]=u*s+o*f,t[2]=a*h+e*M,t[3]=u*h+o*M,t[4]=a*l+e*v+i,t[5]=u*l+o*v+c,t}function M(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t}var l=h,v=M,b=Object.freeze({__proto__:null,create:function(){var t=new Float64Array(6);return t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[0]=1,t[3]=1,t},clone:function(t){var n=new Float64Array(6);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},fromValues:function(t,n,r,a,u,e){var o=new Float64Array(6);return o[0]=t,o[1]=n,o[2]=r,o[3]=a,o[4]=u,o[5]=e,o},set:function(t,n,r,a,u,e,o){return t[0]=n,t[1]=r,t[2]=a,t[3]=u,t[4]=e,t[5]=o,t},invert:function(t,n){var r=n[0],a=n[1],u=n[2],e=n[3],o=n[4],i=n[5],c=r*e-a*u;return c?(c=1/c,t[0]=e*c,t[1]=-a*c,t[2]=-u*c,t[3]=r*c,t[4]=(u*i-e*o)*c,t[5]=(a*o-r*i)*c,t):null},determinant:function(t){return t[0]*t[3]-t[1]*t[2]},multiply:h,rotate:function(t,n,r){var a=n[0],u=n[1],e=n[2],o=n[3],i=n[4],c=n[5],s=Math.sin(r),f=Math.cos(r);return t[0]=a*f+e*s,t[1]=u*f+o*s,t[2]=a*-s+e*f,t[3]=u*-s+o*f,t[4]=i,t[5]=c,t},scale:function(t,n,r){var a=n[0],u=n[1],e=n[2],o=n[3],i=n[4],c=n[5],s=r[0],f=r[1];return t[0]=a*s,t[1]=u*s,t[2]=e*f,t[3]=o*f,t[4]=i,t[5]=c,t},translate:function(t,n,r){var a=n[0],u=n[1],e=n[2],o=n[3],i=n[4],c=n[5],s=r[0],f=r[1];return t[0]=a,t[1]=u,t[2]=e,t[3]=o,t[4]=a*s+e*f+i,t[5]=u*s+o*f+c,t},fromRotation:function(t,n){var r=Math.sin(n),a=Math.cos(n);return t[0]=a,t[1]=r,t[2]=-r,t[3]=a,t[4]=0,t[5]=0,t},fromScaling:function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t[4]=0,t[5]=0,t},fromTranslation:function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=n[0],t[5]=n[1],t},str:function(t){return"mat2d("+t[0].toString()+", "+t[1].toString()+", "+t[2].toString()+", "+t[3].toString()+", "+t[4].toString()+", "+t[5].toString()+")"},frob:function(t){return n.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},add:function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t},subtract:M,multiplyScalar:function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t},multiplyScalarAndAdd:function(t,n,r,a){return t[0]=n[0]+r[0]*a,t[1]=n[1]+r[1]*a,t[2]=n[2]+r[2]*a,t[3]=n[3]+r[3]*a,t[4]=n[4]+r[4]*a,t[5]=n[5]+r[5]*a,t},exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]},equals:function(t,a){var u=t[0],e=t[1],o=t[2],i=t[3],c=t[4],s=t[5],f=a[0],h=a[1],M=a[2],l=a[3],v=a[4],b=a[5];return Math.abs(u-f)<=r*n.max(1,Math.abs(u),Math.abs(f))&&Math.abs(e-h)<=r*n.max(1,Math.abs(e),Math.abs(h))&&Math.abs(o-M)<=r*n.max(1,Math.abs(o),Math.abs(M))&&Math.abs(i-l)<=r*n.max(1,Math.abs(i),Math.abs(l))&&Math.abs(c-v)<=r*n.max(1,Math.abs(c),Math.abs(v))&&Math.abs(s-b)<=r*n.max(1,Math.abs(s),Math.abs(b))},mul:l,sub:v});function m(){var t=new Float64Array(9);return t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0,t[0]=1,t[4]=1,t[8]=1,t}function d(t,n,r){var a=n[0],u=n[1],e=n[2],o=n[3],i=n[4],c=n[5],s=n[6],f=n[7],h=n[8],M=r[0],l=r[1],v=r[2],b=r[3],m=r[4],d=r[5],g=r[6],y=r[7],p=r[8];return t[0]=M*a+l*o+v*s,t[1]=M*u+l*i+v*f,t[2]=M*e+l*c+v*h,t[3]=b*a+m*o+d*s,t[4]=b*u+m*i+d*f,t[5]=b*e+m*c+d*h,t[6]=g*a+y*o+p*s,t[7]=g*u+y*i+p*f,t[8]=g*e+y*c+p*h,t}function g(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t[6]=n[6]-r[6],t[7]=n[7]-r[7],t[8]=n[8]-r[8],t}var y=d,p=g,x=Object.freeze({__proto__:null,create:m,fromMat4:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t},clone:function(t){var n=new Float64Array(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},fromValues:function(t,n,r,a,u,e,o,i,c){var s=new Float64Array(9);return s[0]=t,s[1]=n,s[2]=r,s[3]=a,s[4]=u,s[5]=e,s[6]=o,s[7]=i,s[8]=c,s},set:function(t,n,r,a,u,e,o,i,c,s){return t[0]=n,t[1]=r,t[2]=a,t[3]=u,t[4]=e,t[5]=o,t[6]=i,t[7]=c,t[8]=s,t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},transpose:function(t,n){if(t===n){var r=n[1],a=n[2],u=n[5];t[1]=n[3],t[2]=n[6],t[3]=r,t[5]=n[7],t[6]=a,t[7]=u}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t},invert:function(t,n){var r=n[0],a=n[1],u=n[2],e=n[3],o=n[4],i=n[5],c=n[6],s=n[7],f=n[8],h=f*o-i*s,M=-f*e+i*c,l=s*e-o*c,v=r*h+a*M+u*l;return v?(v=1/v,t[0]=h*v,t[1]=(-f*a+u*s)*v,t[2]=(i*a-u*o)*v,t[3]=M*v,t[4]=(f*r-u*c)*v,t[5]=(-i*r+u*e)*v,t[6]=l*v,t[7]=(-s*r+a*c)*v,t[8]=(o*r-a*e)*v,t):null},adjoint:function(t,n){var r=n[0],a=n[1],u=n[2],e=n[3],o=n[4],i=n[5],c=n[6],s=n[7],f=n[8];return t[0]=o*f-i*s,t[1]=u*s-a*f,t[2]=a*i-u*o,t[3]=i*c-e*f,t[4]=r*f-u*c,t[5]=u*e-r*i,t[6]=e*s-o*c,t[7]=a*c-r*s,t[8]=r*o-a*e,t},determinant:function(t){var n=t[0],r=t[1],a=t[2],u=t[3],e=t[4],o=t[5],i=t[6],c=t[7],s=t[8];return n*(s*e-o*c)+r*(-s*u+o*i)+a*(c*u-e*i)},multiply:d,translate:function(t,n,r){var a=n[0],u=n[1],e=n[2],o=n[3],i=n[4],c=n[5],s=n[6],f=n[7],h=n[8],M=r[0],l=r[1];return t[0]=a,t[1]=u,t[2]=e,t[3]=o,t[4]=i,t[5]=c,t[6]=M*a+l*o+s,t[7]=M*u+l*i+f,t[8]=M*e+l*c+h,t},rotate:function(t,n,r){var a=n[0],u=n[1],e=n[2],o=n[3],i=n[4],c=n[5],s=n[6],f=n[7],h=n[8],M=Math.sin(r),l=Math.cos(r);return t[0]=l*a+M*o,t[1]=l*u+M*i,t[2]=l*e+M*c,t[3]=l*o-M*a,t[4]=l*i-M*u,t[5]=l*c-M*e,t[6]=s,t[7]=f,t[8]=h,t},scale:function(t,n,r){var a=r[0],u=r[1];return t[0]=a*n[0],t[1]=a*n[1],t[2]=a*n[2],t[3]=u*n[3],t[4]=u*n[4],t[5]=u*n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},fromTranslation:function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=n[0],t[7]=n[1],t[8]=1,t},fromRotation:function(t,n){var r=Math.sin(n),a=Math.cos(n);return t[0]=a,t[1]=r,t[2]=0,t[3]=-r,t[4]=a,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromScaling:function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=n[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromMat2d:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t},fromQuat:function(t,n){var r=n[0],a=n[1],u=n[2],e=n[3],o=r+r,i=a+a,c=u+u,s=r*o,f=a*o,h=a*i,M=u*o,l=u*i,v=u*c,b=e*o,m=e*i,d=e*c;return t[0]=1-h-v,t[3]=f-d,t[6]=M+m,t[1]=f+d,t[4]=1-s-v,t[7]=l-b,t[2]=M-m,t[5]=l+b,t[8]=1-s-h,t},normalFromMat4:function(t,n){var r=n[0],a=n[1],u=n[2],e=n[3],o=n[4],i=n[5],c=n[6],s=n[7],f=n[8],h=n[9],M=n[10],l=n[11],v=n[12],b=n[13],m=n[14],d=n[15],g=r*i-a*o,y=r*c-u*o,p=r*s-e*o,x=a*c-u*i,S=a*s-e*i,q=u*s-e*c,A=f*b-h*v,_=f*m-M*v,w=f*d-l*v,F=h*m-M*b,z=h*d-l*b,O=M*d-l*m,R=g*O-y*z+p*F+x*w-S*_+q*A;return R?(R=1/R,t[0]=(i*O-c*z+s*F)*R,t[1]=(c*w-o*O-s*_)*R,t[2]=(o*z-i*w+s*A)*R,t[3]=(u*z-a*O-e*F)*R,t[4]=(r*O-u*w+e*_)*R,t[5]=(a*w-r*z-e*A)*R,t[6]=(b*q-m*S+d*x)*R,t[7]=(m*p-v*q-d*y)*R,t[8]=(v*S-b*p+d*g)*R,t):null},projection:function(t,n,r){return t[0]=2/n,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},str:function(t){return"mat3("+t[0].toString()+", "+t[1].toString()+", "+t[2].toString()+", "+t[3].toString()+", "+t[4].toString()+", "+t[5].toString()+", "+t[6].toString()+", "+t[7].toString()+", "+t[8].toString()+")"},frob:function(t){return n.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},add:function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t[8]=n[8]+r[8],t},subtract:g,multiplyScalar:function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t[8]=n[8]*r,t},multiplyScalarAndAdd:function(t,n,r,a){return t[0]=n[0]+r[0]*a,t[1]=n[1]+r[1]*a,t[2]=n[2]+r[2]*a,t[3]=n[3]+r[3]*a,t[4]=n[4]+r[4]*a,t[5]=n[5]+r[5]*a,t[6]=n[6]+r[6]*a,t[7]=n[7]+r[7]*a,t[8]=n[8]+r[8]*a,t},exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]},equals:function(t,a){var u=t[0],e=t[1],o=t[2],i=t[3],c=t[4],s=t[5],f=t[6],h=t[7],M=t[8],l=a[0],v=a[1],b=a[2],m=a[3],d=a[4],g=a[5],y=a[6],p=a[7],x=a[8];return Math.abs(u-l)<=r*n.max(1,Math.abs(u),Math.abs(l))&&Math.abs(e-v)<=r*n.max(1,Math.abs(e),Math.abs(v))&&Math.abs(o-b)<=r*n.max(1,Math.abs(o),Math.abs(b))&&Math.abs(i-m)<=r*n.max(1,Math.abs(i),Math.abs(m))&&Math.abs(c-d)<=r*n.max(1,Math.abs(c),Math.abs(d))&&Math.abs(s-g)<=r*n.max(1,Math.abs(s),Math.abs(g))&&Math.abs(f-y)<=r*n.max(1,Math.abs(f),Math.abs(y))&&Math.abs(h-p)<=r*n.max(1,Math.abs(h),Math.abs(p))&&Math.abs(M-x)<=r*n.max(1,Math.abs(M),Math.abs(x))},mul:y,sub:p}),S=function(){};function q(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function A(t,n,r){var a=n[0],u=n[1],e=n[2],o=n[3],i=n[4],c=n[5],s=n[6],f=n[7],h=n[8],M=n[9],l=n[10],v=n[11],b=n[12],m=n[13],d=n[14],g=n[15],y=r[0],p=r[1],x=r[2],S=r[3];return t[0]=y*a+p*i+x*h+S*b,t[1]=y*u+p*c+x*M+S*m,t[2]=y*e+p*s+x*l+S*d,t[3]=y*o+p*f+x*v+S*g,y=r[4],p=r[5],x=r[6],S=r[7],t[4]=y*a+p*i+x*h+S*b,t[5]=y*u+p*c+x*M+S*m,t[6]=y*e+p*s+x*l+S*d,t[7]=y*o+p*f+x*v+S*g,y=r[8],p=r[9],x=r[10],S=r[11],t[8]=y*a+p*i+x*h+S*b,t[9]=y*u+p*c+x*M+S*m,t[10]=y*e+p*s+x*l+S*d,t[11]=y*o+p*f+x*v+S*g,y=r[12],p=r[13],x=r[14],S=r[15],t[12]=y*a+p*i+x*h+S*b,t[13]=y*u+p*c+x*M+S*m,t[14]=y*e+p*s+x*l+S*d,t[15]=y*o+p*f+x*v+S*g,t}function _(t,n,r){var a=n[0],u=n[1],e=n[2],o=n[3],i=a+a,c=u+u,s=e+e,f=a*i,h=a*c,M=a*s,l=u*c,v=u*s,b=e*s,m=o*i,d=o*c,g=o*s;return t[0]=1-(l+b),t[1]=h+g,t[2]=M-d,t[3]=0,t[4]=h-g,t[5]=1-(f+b),t[6]=v+m,t[7]=0,t[8]=M+d,t[9]=v-m,t[10]=1-(f+l),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function w(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function F(t,r){var a=r[0],u=r[1],e=r[2],o=r[4],i=r[5],c=r[6],s=r[8],f=r[9],h=r[10];return t[0]=n.hypot(a,u,e),t[1]=n.hypot(o,i,c),t[2]=n.hypot(s,f,h),t}function z(t,n){var r=changetype(new Float64Array(3));F(r,n);var a=1/r[0],u=1/r[1],e=1/r[2],o=n[0]*a,i=n[1]*u,c=n[2]*e,s=n[4]*a,f=n[5]*u,h=n[6]*e,M=n[8]*a,l=n[9]*u,v=n[10]*e,b=o+f+v,m=0;return b>0?(m=2*Math.sqrt(b+1),t[3]=.25*m,t[0]=(h-l)/m,t[1]=(M-c)/m,t[2]=(i-s)/m):o>f&&o>v?(m=2*Math.sqrt(1+o-f-v),t[3]=(h-l)/m,t[0]=.25*m,t[1]=(i+s)/m,t[2]=(M+c)/m):f>v?(m=2*Math.sqrt(1+f-o-v),t[3]=(M-c)/m,t[0]=(i+s)/m,t[1]=.25*m,t[2]=(h+l)/m):(m=2*Math.sqrt(1+v-o-f),t[3]=(i-s)/m,t[0]=(M+c)/m,t[1]=(h+l)/m,t[2]=.25*m),t}function O(t,n,r,a,u){var e=1/Math.tan(n/2);if(t[0]=e/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,"number"==typeof u&&u!==1/0){var o=1/(a-u);t[10]=(u+a)*o,t[14]=2*u*a*o}else t[10]=-1,t[14]=-2*a;return t}var R=O;function j(t,n,r,a,u,e,o){var i=1/(n-r),c=1/(a-u),s=1/(e-o);return t[0]=-2*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(n+r)*i,t[13]=(u+a)*c,t[14]=(o+e)*s,t[15]=1,t}var E=j;function P(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t[6]=n[6]-r[6],t[7]=n[7]-r[7],t[8]=n[8]-r[8],t[9]=n[9]-r[9],t[10]=n[10]-r[10],t[11]=n[11]-r[11],t[12]=n[12]-r[12],t[13]=n[13]-r[13],t[14]=n[14]-r[14],t[15]=n[15]-r[15],t}var T=A,D=P,I=Object.freeze({__proto__:null,Fov:S,create:function(){var t=new Float64Array(16);return t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},clone:function(t){var n=new Float64Array(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},fromValues:function(t,n,r,a,u,e,o,i,c,s,f,h,M,l,v,b){var m=new Float64Array(16);return m[0]=t,m[1]=n,m[2]=r,m[3]=a,m[4]=u,m[5]=e,m[6]=o,m[7]=i,m[8]=c,m[9]=s,m[10]=f,m[11]=h,m[12]=M,m[13]=l,m[14]=v,m[15]=b,m},set:function(t,n,r,a,u,e,o,i,c,s,f,h,M,l,v,b,m){return t[0]=n,t[1]=r,t[2]=a,t[3]=u,t[4]=e,t[5]=o,t[6]=i,t[7]=c,t[8]=s,t[9]=f,t[10]=h,t[11]=M,t[12]=l,t[13]=v,t[14]=b,t[15]=m,t},identity:q,transpose:function(t,n){if(t===n){var r=n[1],a=n[2],u=n[3],e=n[6],o=n[7],i=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=r,t[6]=n[9],t[7]=n[13],t[8]=a,t[9]=e,t[11]=n[14],t[12]=u,t[13]=o,t[14]=i}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t},invert:function(t,n){var r=n[0],a=n[1],u=n[2],e=n[3],o=n[4],i=n[5],c=n[6],s=n[7],f=n[8],h=n[9],M=n[10],l=n[11],v=n[12],b=n[13],m=n[14],d=n[15],g=r*i-a*o,y=r*c-u*o,p=r*s-e*o,x=a*c-u*i,S=a*s-e*i,q=u*s-e*c,A=f*b-h*v,_=f*m-M*v,w=f*d-l*v,F=h*m-M*b,z=h*d-l*b,O=M*d-l*m,R=g*O-y*z+p*F+x*w-S*_+q*A;return R?(R=1/R,t[0]=(i*O-c*z+s*F)*R,t[1]=(u*z-a*O-e*F)*R,t[2]=(b*q-m*S+d*x)*R,t[3]=(M*S-h*q-l*x)*R,t[4]=(c*w-o*O-s*_)*R,t[5]=(r*O-u*w+e*_)*R,t[6]=(m*p-v*q-d*y)*R,t[7]=(f*q-M*p+l*y)*R,t[8]=(o*z-i*w+s*A)*R,t[9]=(a*w-r*z-e*A)*R,t[10]=(v*S-b*p+d*g)*R,t[11]=(h*p-f*S-l*g)*R,t[12]=(i*_-o*F-c*A)*R,t[13]=(r*F-a*_+u*A)*R,t[14]=(b*y-v*x-m*g)*R,t[15]=(f*x-h*y+M*g)*R,t):null},adjoint:function(t,n){var r=n[0],a=n[1],u=n[2],e=n[3],o=n[4],i=n[5],c=n[6],s=n[7],f=n[8],h=n[9],M=n[10],l=n[11],v=n[12],b=n[13],m=n[14],d=n[15],g=r*i-a*o,y=r*c-u*o,p=r*s-e*o,x=a*c-u*i,S=a*s-e*i,q=u*s-e*c,A=f*b-h*v,_=f*m-M*v,w=f*d-l*v,F=h*m-M*b,z=h*d-l*b,O=M*d-l*m;return t[0]=i*O-c*z+s*F,t[1]=u*z-a*O-e*F,t[2]=b*q-m*S+d*x,t[3]=M*S-h*q-l*x,t[4]=c*w-o*O-s*_,t[5]=r*O-u*w+e*_,t[6]=m*p-v*q-d*y,t[7]=f*q-M*p+l*y,t[8]=o*z-i*w+s*A,t[9]=a*w-r*z-e*A,t[10]=v*S-b*p+d*g,t[11]=h*p-f*S-l*g,t[12]=i*_-o*F-c*A,t[13]=r*F-a*_+u*A,t[14]=b*y-v*x-m*g,t[15]=f*x-h*y+M*g,t},determinant:function(t){var n=t[0],r=t[1],a=t[2],u=t[3],e=t[4],o=t[5],i=t[6],c=t[7],s=t[8],f=t[9],h=t[10],M=t[11],l=t[12],v=t[13],b=t[14],m=n*o-r*e,d=n*i-a*e,g=r*i-a*o,y=s*v-f*l,p=s*b-h*l,x=f*b-h*v;return c*(n*x-r*p+a*y)-u*(e*x-o*p+i*y)+t[15]*(s*g-f*d+h*m)-M*(l*g-v*d+b*m)},multiply:A,translate:function(t,n,r){var a,u,e,o,i,c,s,f,h,M,l,v,b=r[0],m=r[1],d=r[2];return n===t?(t[12]=n[0]*b+n[4]*m+n[8]*d+n[12],t[13]=n[1]*b+n[5]*m+n[9]*d+n[13],t[14]=n[2]*b+n[6]*m+n[10]*d+n[14],t[15]=n[3]*b+n[7]*m+n[11]*d+n[15]):(a=n[0],u=n[1],e=n[2],o=n[3],i=n[4],c=n[5],s=n[6],f=n[7],h=n[8],M=n[9],l=n[10],v=n[11],t[0]=a,t[1]=u,t[2]=e,t[3]=o,t[4]=i,t[5]=c,t[6]=s,t[7]=f,t[8]=h,t[9]=M,t[10]=l,t[11]=v,t[12]=a*b+i*m+h*d+n[12],t[13]=u*b+c*m+M*d+n[13],t[14]=e*b+s*m+l*d+n[14],t[15]=o*b+f*m+v*d+n[15]),t},scale:function(t,n,r){var a=r[0],u=r[1],e=r[2];return t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t[3]=n[3]*a,t[4]=n[4]*u,t[5]=n[5]*u,t[6]=n[6]*u,t[7]=n[7]*u,t[8]=n[8]*e,t[9]=n[9]*e,t[10]=n[10]*e,t[11]=n[11]*e,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},rotate:function(t,a,u,e){var o,i,c,s,f,h,M,l,v,b,m,d,g,y,p,x,S,q,A,_,w,F,z,O,R=e[0],j=e[1],E=e[2],P=n.hypot(R,j,E);return P<r?null:(R*=P=1/P,j*=P,E*=P,o=Math.sin(u),c=1-(i=Math.cos(u)),s=a[0],f=a[1],h=a[2],M=a[3],l=a[4],v=a[5],b=a[6],m=a[7],d=a[8],g=a[9],y=a[10],p=a[11],x=R*R*c+i,S=j*R*c+E*o,q=E*R*c-j*o,A=R*j*c-E*o,_=j*j*c+i,w=E*j*c+R*o,F=R*E*c+j*o,z=j*E*c-R*o,O=E*E*c+i,t[0]=s*x+l*S+d*q,t[1]=f*x+v*S+g*q,t[2]=h*x+b*S+y*q,t[3]=M*x+m*S+p*q,t[4]=s*A+l*_+d*w,t[5]=f*A+v*_+g*w,t[6]=h*A+b*_+y*w,t[7]=M*A+m*_+p*w,t[8]=s*F+l*z+d*O,t[9]=f*F+v*z+g*O,t[10]=h*F+b*z+y*O,t[11]=M*F+m*z+p*O,a!==t&&(t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t)},rotateX:function(t,n,r){var a=Math.sin(r),u=Math.cos(r),e=n[4],o=n[5],i=n[6],c=n[7],s=n[8],f=n[9],h=n[10],M=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=e*u+s*a,t[5]=o*u+f*a,t[6]=i*u+h*a,t[7]=c*u+M*a,t[8]=s*u-e*a,t[9]=f*u-o*a,t[10]=h*u-i*a,t[11]=M*u-c*a,t},rotateY:function(t,n,r){var a=Math.sin(r),u=Math.cos(r),e=n[0],o=n[1],i=n[2],c=n[3],s=n[8],f=n[9],h=n[10],M=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=e*u-s*a,t[1]=o*u-f*a,t[2]=i*u-h*a,t[3]=c*u-M*a,t[8]=e*a+s*u,t[9]=o*a+f*u,t[10]=i*a+h*u,t[11]=c*a+M*u,t},rotateZ:function(t,n,r){var a=Math.sin(r),u=Math.cos(r),e=n[0],o=n[1],i=n[2],c=n[3],s=n[4],f=n[5],h=n[6],M=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=e*u+s*a,t[1]=o*u+f*a,t[2]=i*u+h*a,t[3]=c*u+M*a,t[4]=s*u-e*a,t[5]=f*u-o*a,t[6]=h*u-i*a,t[7]=M*u-c*a,t},fromTranslation:function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},fromScaling:function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotation:function(t,a,u){var e,o,i,c=u[0],s=u[1],f=u[2],h=n.hypot(c,s,f);return h<r?null:(c*=h=1/h,s*=h,f*=h,e=Math.sin(a),i=1-(o=Math.cos(a)),t[0]=c*c*i+o,t[1]=s*c*i+f*e,t[2]=f*c*i-s*e,t[3]=0,t[4]=c*s*i-f*e,t[5]=s*s*i+o,t[6]=f*s*i+c*e,t[7]=0,t[8]=c*f*i+s*e,t[9]=s*f*i-c*e,t[10]=f*f*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},fromXRotation:function(t,n){var r=Math.sin(n),a=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromYRotation:function(t,n){var r=Math.sin(n),a=Math.cos(n);return t[0]=a,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:function(t,n){var r=Math.sin(n),a=Math.cos(n);return t[0]=a,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotationTranslation:_,fromQuat2:function(t,n){var r=new Float64Array(3),a=-n[0],u=-n[1],e=-n[2],o=n[3],i=n[4],c=n[5],s=n[6],f=n[7],h=a*a+u*u+e*e+o*o;return h>0?(r[0]=2*(i*o+f*a+c*e-s*u)/h,r[1]=2*(c*o+f*u+s*a-i*e)/h,r[2]=2*(s*o+f*e+i*u-c*a)/h):(r[0]=2*(i*o+f*a+c*e-s*u),r[1]=2*(c*o+f*u+s*a-i*e),r[2]=2*(s*o+f*e+i*u-c*a)),_(t,n,r),t},getTranslation:w,getScaling:F,getRotation:z,decompose:function(t,r,a,u){r[0]=u[12],r[1]=u[13],r[2]=u[14];var e=u[0],o=u[1],i=u[2],c=u[4],s=u[5],f=u[6],h=u[8],M=u[9],l=u[10];a[0]=n.hypot(e,o,i),a[1]=n.hypot(c,s,f),a[2]=n.hypot(h,M,l);var v=1/a[0],b=1/a[1],m=1/a[2],d=e*v,g=o*b,y=i*m,p=c*v,x=s*b,S=f*m,q=h*v,A=M*b,_=l*m,w=d+x+_,F=0;return w>0?(F=2*Math.sqrt(w+1),t[3]=.25*F,t[0]=(S-A)/F,t[1]=(q-y)/F,t[2]=(g-p)/F):d>x&&d>_?(F=2*Math.sqrt(1+d-x-_),t[3]=(S-A)/F,t[0]=.25*F,t[1]=(g+p)/F,t[2]=(q+y)/F):x>_?(F=2*Math.sqrt(1+x-d-_),t[3]=(q-y)/F,t[0]=(g+p)/F,t[1]=.25*F,t[2]=(S+A)/F):(F=2*Math.sqrt(1+_-d-x),t[3]=(g-p)/F,t[0]=(q+y)/F,t[1]=(S+A)/F,t[2]=.25*F),t},fromRotationTranslationScale:function(t,n,r,a){var u=n[0],e=n[1],o=n[2],i=n[3],c=u+u,s=e+e,f=o+o,h=u*c,M=u*s,l=u*f,v=e*s,b=e*f,m=o*f,d=i*c,g=i*s,y=i*f,p=a[0],x=a[1],S=a[2];return t[0]=(1-(v+m))*p,t[1]=(M+y)*p,t[2]=(l-g)*p,t[3]=0,t[4]=(M-y)*x,t[5]=(1-(h+m))*x,t[6]=(b+d)*x,t[7]=0,t[8]=(l+g)*S,t[9]=(b-d)*S,t[10]=(1-(h+v))*S,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},fromRotationTranslationScaleOrigin:function(t,n,r,a,u){var e=n[0],o=n[1],i=n[2],c=n[3],s=e+e,f=o+o,h=i+i,M=e*s,l=e*f,v=e*h,b=o*f,m=o*h,d=i*h,g=c*s,y=c*f,p=c*h,x=a[0],S=a[1],q=a[2],A=u[0],_=u[1],w=u[2],F=(1-(b+d))*x,z=(l+p)*x,O=(v-y)*x,R=(l-p)*S,j=(1-(M+d))*S,E=(m+g)*S,P=(v+y)*q,T=(m-g)*q,D=(1-(M+b))*q;return t[0]=F,t[1]=z,t[2]=O,t[3]=0,t[4]=R,t[5]=j,t[6]=E,t[7]=0,t[8]=P,t[9]=T,t[10]=D,t[11]=0,t[12]=r[0]+A-(F*A+R*_+P*w),t[13]=r[1]+_-(z*A+j*_+T*w),t[14]=r[2]+w-(O*A+E*_+D*w),t[15]=1,t},fromQuat:function(t,n){var r=n[0],a=n[1],u=n[2],e=n[3],o=r+r,i=a+a,c=u+u,s=r*o,f=a*o,h=a*i,M=u*o,l=u*i,v=u*c,b=e*o,m=e*i,d=e*c;return t[0]=1-h-v,t[1]=f+d,t[2]=M-m,t[3]=0,t[4]=f-d,t[5]=1-s-v,t[6]=l+b,t[7]=0,t[8]=M+m,t[9]=l-b,t[10]=1-s-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},frustum:function(t,n,r,a,u,e,o){var i=1/(r-n),c=1/(u-a),s=1/(e-o);return t[0]=2*e*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*e*c,t[6]=0,t[7]=0,t[8]=(r+n)*i,t[9]=(u+a)*c,t[10]=(o+e)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*e*2*s,t[15]=0,t},perspectiveNO:O,perspective:R,perspectiveZO:function(t,n,r,a,u){var e=1/Math.tan(n/2);if(t[0]=e/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,"number"==typeof u&&u!==1/0){var o=1/(a-u);t[10]=u*o,t[14]=u*a*o}else t[10]=-1,t[14]=-a;return t},perspectiveFromFieldOfView:function(t,n,r,a){var u=Math.tan(n.upDegrees*Math.PI/180),e=Math.tan(n.downDegrees*Math.PI/180),o=Math.tan(n.leftDegrees*Math.PI/180),i=Math.tan(n.rightDegrees*Math.PI/180),c=2/(o+i),s=2/(u+e);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-(o-i)*c*.5,t[9]=(u-e)*s*.5,t[10]=a/(r-a),t[11]=-1,t[12]=0,t[13]=0,t[14]=a*r/(r-a),t[15]=0,t},orthoNO:j,ortho:E,orthoZO:function(t,n,r,a,u,e,o){var i=1/(n-r),c=1/(a-u),s=1/(e-o);return t[0]=-2*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s,t[11]=0,t[12]=(n+r)*i,t[13]=(u+a)*c,t[14]=e*s,t[15]=1,t},lookAt:function(t,a,u,e){var o,i,c,s,f,h,M,l,v,b,m=a[0],d=a[1],g=a[2],y=e[0],p=e[1],x=e[2],S=u[0],A=u[1],_=u[2];return Math.abs(m-S)<r&&Math.abs(d-A)<r&&Math.abs(g-_)<r?q(t):(M=m-S,l=d-A,v=g-_,o=p*(v*=b=1/n.hypot(M,l,v))-x*(l*=b),i=x*(M*=b)-y*v,c=y*l-p*M,(b=n.hypot(o,i,c))?(o*=b=1/b,i*=b,c*=b):(o=0,i=0,c=0),s=l*c-v*i,f=v*o-M*c,h=M*i-l*o,(b=n.hypot(s,f,h))?(s*=b=1/b,f*=b,h*=b):(s=0,f=0,h=0),t[0]=o,t[1]=s,t[2]=M,t[3]=0,t[4]=i,t[5]=f,t[6]=l,t[7]=0,t[8]=c,t[9]=h,t[10]=v,t[11]=0,t[12]=-(o*m+i*d+c*g),t[13]=-(s*m+f*d+h*g),t[14]=-(M*m+l*d+v*g),t[15]=1,t)},targetTo:function(t,n,r,a){var u=n[0],e=n[1],o=n[2],i=a[0],c=a[1],s=a[2],f=u-r[0],h=e-r[1],M=o-r[2],l=f*f+h*h+M*M;l>0&&(f*=l=1/Math.sqrt(l),h*=l,M*=l);var v=c*M-s*h,b=s*f-i*M,m=i*h-c*f;return(l=v*v+b*b+m*m)>0&&(v*=l=1/Math.sqrt(l),b*=l,m*=l),t[0]=v,t[1]=b,t[2]=m,t[3]=0,t[4]=h*m-M*b,t[5]=M*v-f*m,t[6]=f*b-h*v,t[7]=0,t[8]=f,t[9]=h,t[10]=M,t[11]=0,t[12]=u,t[13]=e,t[14]=o,t[15]=1,t},str:function(t){return"mat4("+t[0].toString()+", "+t[1].toString()+", "+t[2].toString()+", "+t[3].toString()+", "+t[4].toString()+", "+t[5].toString()+", "+t[6].toString()+", "+t[7].toString()+", "+t[8].toString()+", "+t[9].toString()+", "+t[10].toString()+", "+t[11].toString()+", "+t[12].toString()+", "+t[13].toString()+", "+t[14].toString()+", "+t[15].toString()+")"},frob:function(t){return n.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},add:function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t[8]=n[8]+r[8],t[9]=n[9]+r[9],t[10]=n[10]+r[10],t[11]=n[11]+r[11],t[12]=n[12]+r[12],t[13]=n[13]+r[13],t[14]=n[14]+r[14],t[15]=n[15]+r[15],t},subtract:P,multiplyScalar:function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t[8]=n[8]*r,t[9]=n[9]*r,t[10]=n[10]*r,t[11]=n[11]*r,t[12]=n[12]*r,t[13]=n[13]*r,t[14]=n[14]*r,t[15]=n[15]*r,t},multiplyScalarAndAdd:function(t,n,r,a){return t[0]=n[0]+r[0]*a,t[1]=n[1]+r[1]*a,t[2]=n[2]+r[2]*a,t[3]=n[3]+r[3]*a,t[4]=n[4]+r[4]*a,t[5]=n[5]+r[5]*a,t[6]=n[6]+r[6]*a,t[7]=n[7]+r[7]*a,t[8]=n[8]+r[8]*a,t[9]=n[9]+r[9]*a,t[10]=n[10]+r[10]*a,t[11]=n[11]+r[11]*a,t[12]=n[12]+r[12]*a,t[13]=n[13]+r[13]*a,t[14]=n[14]+r[14]*a,t[15]=n[15]+r[15]*a,t},exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]},equals:function(t,a){var u=t[0],e=t[1],o=t[2],i=t[3],c=t[4],s=t[5],f=t[6],h=t[7],M=t[8],l=t[9],v=t[10],b=t[11],m=t[12],d=t[13],g=t[14],y=t[15],p=a[0],x=a[1],S=a[2],q=a[3],A=a[4],_=a[5],w=a[6],F=a[7],z=a[8],O=a[9],R=a[10],j=a[11],E=a[12],P=a[13],T=a[14],D=a[15];return Math.abs(u-p)<=r*n.max(1,Math.abs(u),Math.abs(p))&&Math.abs(e-x)<=r*n.max(1,Math.abs(e),Math.abs(x))&&Math.abs(o-S)<=r*n.max(1,Math.abs(o),Math.abs(S))&&Math.abs(i-q)<=r*n.max(1,Math.abs(i),Math.abs(q))&&Math.abs(c-A)<=r*n.max(1,Math.abs(c),Math.abs(A))&&Math.abs(s-_)<=r*n.max(1,Math.abs(s),Math.abs(_))&&Math.abs(f-w)<=r*n.max(1,Math.abs(f),Math.abs(w))&&Math.abs(h-F)<=r*n.max(1,Math.abs(h),Math.abs(F))&&Math.abs(M-z)<=r*n.max(1,Math.abs(M),Math.abs(z))&&Math.abs(l-O)<=r*n.max(1,Math.abs(l),Math.abs(O))&&Math.abs(v-R)<=r*n.max(1,Math.abs(v),Math.abs(R))&&Math.abs(b-j)<=r*n.max(1,Math.abs(b),Math.abs(j))&&Math.abs(m-E)<=r*n.max(1,Math.abs(m),Math.abs(E))&&Math.abs(d-P)<=r*n.max(1,Math.abs(d),Math.abs(P))&&Math.abs(g-T)<=r*n.max(1,Math.abs(g),Math.abs(T))&&Math.abs(y-D)<=r*n.max(1,Math.abs(y),Math.abs(D))},mul:T,sub:D});function L(){var t=new Float64Array(3);return t[0]=0,t[1]=0,t[2]=0,t}function V(t){var r=t[0],a=t[1],u=t[2];return n.hypot(r,a,u)}function Q(t,n,r){var a=new Float64Array(3);return a[0]=t,a[1]=n,a[2]=r,a}function Z(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t}function N(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t}function X(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t}function Y(t,r){var a=r[0]-t[0],u=r[1]-t[1],e=r[2]-t[2];return n.hypot(a,u,e)}function k(t,n){var r=n[0]-t[0],a=n[1]-t[1],u=n[2]-t[2];return r*r+a*a+u*u}function B(t){var n=t[0],r=t[1],a=t[2];return n*n+r*r+a*a}function U(t,n){var r=n[0],a=n[1],u=n[2],e=r*r+a*a+u*u;return e>0&&(e=1/Math.sqrt(e)),t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t}function G(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function W(t,n,r){var a=n[0],u=n[1],e=n[2],o=r[0],i=r[1],c=r[2];return t[0]=u*c-e*i,t[1]=e*o-a*c,t[2]=a*i-u*o,t}var C=Z,H=N,J=X,K=Y,$=k,tt=V,nt=B,rt=L(),at=function(t,r,a,u,e,o){var i,c;for(r||(r=3),a||(a=0),c=u?n.min(u*r+a,t.length):t.length,i=a;i<c;i+=r)rt[0]=t[i],rt[1]=t[i+1],rt[2]=t[i+2],e(rt,rt,o),t[i]=rt[0],t[i+1]=rt[1],t[i+2]=rt[2];return t},ut=Object.freeze({__proto__:null,create:L,clone:function(t){var n=new Float64Array(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n},length:V,fromValues:Q,copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t},set:function(t,n,r,a){return t[0]=n,t[1]=r,t[2]=a,t},add:function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t},subtract:Z,multiply:N,divide:X,ceil:function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t},floor:function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t},min:function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t},max:function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t},round:function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t},scale:function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t},scaleAndAdd:function(t,n,r,a){return t[0]=n[0]+r[0]*a,t[1]=n[1]+r[1]*a,t[2]=n[2]+r[2]*a,t},distance:Y,squaredDistance:k,squaredLength:B,negate:function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t},inverse:function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t},normalize:U,dot:G,cross:W,lerp:function(t,n,r,a){var u=n[0],e=n[1],o=n[2];return t[0]=u+a*(r[0]-u),t[1]=e+a*(r[1]-e),t[2]=o+a*(r[2]-o),t},slerp:function(t,n,r,a){var u=Math.acos(Math.min(Math.max(G(n,r),-1),1)),e=Math.sin(u),o=Math.sin((1-a)*u)/e,i=Math.sin(a*u)/e;return t[0]=o*n[0]+i*r[0],t[1]=o*n[1]+i*r[1],t[2]=o*n[2]+i*r[2],t},hermite:function(t,n,r,a,u,e){var o=e*e,i=o*(2*e-3)+1,c=o*(e-2)+e,s=o*(e-1),f=o*(3-2*e);return t[0]=n[0]*i+r[0]*c+a[0]*s+u[0]*f,t[1]=n[1]*i+r[1]*c+a[1]*s+u[1]*f,t[2]=n[2]*i+r[2]*c+a[2]*s+u[2]*f,t},bezier:function(t,n,r,a,u,e){var o=1-e,i=o*o,c=e*e,s=i*o,f=3*e*i,h=3*c*o,M=c*e;return t[0]=n[0]*s+r[0]*f+a[0]*h+u[0]*M,t[1]=n[1]*s+r[1]*f+a[1]*h+u[1]*M,t[2]=n[2]*s+r[2]*f+a[2]*h+u[2]*M,t},random:function(t,n){n=n||1;var r=2*a()*Math.PI,u=2*a()-1,e=Math.sqrt(1-u*u)*n;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t[2]=u*n,t},transformMat4:function(t,n,r){var a=n[0],u=n[1],e=n[2],o=r[3]*a+r[7]*u+r[11]*e+r[15];return o=o||1,t[0]=(r[0]*a+r[4]*u+r[8]*e+r[12])/o,t[1]=(r[1]*a+r[5]*u+r[9]*e+r[13])/o,t[2]=(r[2]*a+r[6]*u+r[10]*e+r[14])/o,t},transformMat3:function(t,n,r){var a=n[0],u=n[1],e=n[2];return t[0]=a*r[0]+u*r[3]+e*r[6],t[1]=a*r[1]+u*r[4]+e*r[7],t[2]=a*r[2]+u*r[5]+e*r[8],t},transformQuat:function(t,n,r){var a=r[0],u=r[1],e=r[2],o=r[3],i=n[0],c=n[1],s=n[2],f=u*s-e*c,h=e*i-a*s,M=a*c-u*i,l=u*M-e*h,v=e*f-a*M,b=a*h-u*f,m=2*o;return f*=m,h*=m,M*=m,l*=2,v*=2,b*=2,t[0]=i+f+l,t[1]=c+h+v,t[2]=s+M+b,t},rotateX:function(t,n,r,a){var u=[],e=[];return u[0]=n[0]-r[0],u[1]=n[1]-r[1],u[2]=n[2]-r[2],e[0]=u[0],e[1]=u[1]*Math.cos(a)-u[2]*Math.sin(a),e[2]=u[1]*Math.sin(a)+u[2]*Math.cos(a),t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},rotateY:function(t,n,r,a){var u=[],e=[];return u[0]=n[0]-r[0],u[1]=n[1]-r[1],u[2]=n[2]-r[2],e[0]=u[2]*Math.sin(a)+u[0]*Math.cos(a),e[1]=u[1],e[2]=u[2]*Math.cos(a)-u[0]*Math.sin(a),t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},rotateZ:function(t,n,r,a){var u=[],e=[];return u[0]=n[0]-r[0],u[1]=n[1]-r[1],u[2]=n[2]-r[2],e[0]=u[0]*Math.cos(a)-u[1]*Math.sin(a),e[1]=u[0]*Math.sin(a)+u[1]*Math.cos(a),e[2]=u[2],t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},angle:function(t,n){var r=t[0],a=t[1],u=t[2],e=n[0],o=n[1],i=n[2],c=Math.sqrt(r*r+a*a+u*u)*Math.sqrt(e*e+o*o+i*i),s=c&&G(t,n)/c;return Math.acos(Math.min(Math.max(s,-1),1))},zero:function(t){return t[0]=0,t[1]=0,t[2]=0,t},str:function(t){return"vec3("+t[0].toString()+", "+t[1].toString()+", "+t[2].toString()+")"},exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]},equals:function(t,a){var u=t[0],e=t[1],o=t[2],i=a[0],c=a[1],s=a[2];return Math.abs(u-i)<=r*n.max(1,Math.abs(u),Math.abs(i))&&Math.abs(e-c)<=r*n.max(1,Math.abs(e),Math.abs(c))&&Math.abs(o-s)<=r*n.max(1,Math.abs(o),Math.abs(s))},sub:C,mul:H,div:J,dist:K,sqrDist:$,len:tt,sqrLen:nt,forEach:at});function et(){var t=new Float64Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function ot(t){var n=new Float64Array(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function it(t,n,r,a){var u=new Float64Array(4);return u[0]=t,u[1]=n,u[2]=r,u[3]=a,u}function ct(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function st(t,n,r,a,u){return t[0]=n,t[1]=r,t[2]=a,t[3]=u,t}function ft(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t}function ht(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t}function Mt(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t[3]=n[3]*r[3],t}function lt(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t[3]=n[3]/r[3],t}function vt(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t}function bt(t,r){var a=r[0]-t[0],u=r[1]-t[1],e=r[2]-t[2],o=r[3]-t[3];return n.hypot(a,u,e,o)}function mt(t,n){var r=n[0]-t[0],a=n[1]-t[1],u=n[2]-t[2],e=n[3]-t[3];return r*r+a*a+u*u+e*e}function dt(t){var r=t[0],a=t[1],u=t[2],e=t[3];return n.hypot(r,a,u,e)}function gt(t){var n=t[0],r=t[1],a=t[2],u=t[3];return n*n+r*r+a*a+u*u}function yt(t,n){var r=n[0],a=n[1],u=n[2],e=n[3],o=r*r+a*a+u*u+e*e;return o>0&&(o=1/Math.sqrt(o)),t[0]=r*o,t[1]=a*o,t[2]=u*o,t[3]=e*o,t}function pt(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function xt(t,n,r,a){var u=n[0],e=n[1],o=n[2],i=n[3];return t[0]=u+a*(r[0]-u),t[1]=e+a*(r[1]-e),t[2]=o+a*(r[2]-o),t[3]=i+a*(r[3]-i),t}function St(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}var qt=ht,At=Mt,_t=lt,wt=bt,Ft=mt,zt=dt,Ot=gt,Rt=et(),jt=function(t,r,a,u,e,o){var i,c;for(r||(r=4),a||(a=0),c=u?n.min(u*r+a,t.length):t.length,i=a;i<c;i+=r)Rt[0]=t[i],Rt[1]=t[i+1],Rt[2]=t[i+2],Rt[3]=t[i+3],e(Rt,Rt,o),t[i]=Rt[0],t[i+1]=Rt[1],t[i+2]=Rt[2],t[i+3]=Rt[3];return t},Et=Object.freeze({__proto__:null,create:et,clone:ot,fromValues:it,copy:ct,set:st,add:ft,subtract:ht,multiply:Mt,divide:lt,ceil:function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t},floor:function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t},min:function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t[3]=Math.min(n[3],r[3]),t},max:function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t[3]=Math.max(n[3],r[3]),t},round:function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t},scale:vt,scaleAndAdd:function(t,n,r,a){return t[0]=n[0]+r[0]*a,t[1]=n[1]+r[1]*a,t[2]=n[2]+r[2]*a,t[3]=n[3]+r[3]*a,t},distance:bt,squaredDistance:mt,length:dt,squaredLength:gt,negate:function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},inverse:function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t},normalize:yt,dot:pt,cross:function(t,n,r,a){var u=r[0]*a[1]-r[1]*a[0],e=r[0]*a[2]-r[2]*a[0],o=r[0]*a[3]-r[3]*a[0],i=r[1]*a[2]-r[2]*a[1],c=r[1]*a[3]-r[3]*a[1],s=r[2]*a[3]-r[3]*a[2],f=n[0],h=n[1],M=n[2],l=n[3];return t[0]=h*s-M*c+l*i,t[1]=-f*s+M*o-l*e,t[2]=f*c-h*o+l*u,t[3]=-f*i+h*e-M*u,t},lerp:xt,random:function(t,n){var r,u,e,o,i,c;n=n||1;do{i=(r=2*a()-1)*r+(u=2*a()-1)*u}while(i>=1);do{c=(e=2*a()-1)*e+(o=2*a()-1)*o}while(c>=1);var s=Math.sqrt((1-i)/c);return t[0]=n*r,t[1]=n*u,t[2]=n*e*s,t[3]=n*o*s,t},transformMat4:function(t,n,r){var a=n[0],u=n[1],e=n[2],o=n[3];return t[0]=r[0]*a+r[4]*u+r[8]*e+r[12]*o,t[1]=r[1]*a+r[5]*u+r[9]*e+r[13]*o,t[2]=r[2]*a+r[6]*u+r[10]*e+r[14]*o,t[3]=r[3]*a+r[7]*u+r[11]*e+r[15]*o,t},transformQuat:function(t,n,r){var a=n[0],u=n[1],e=n[2],o=r[0],i=r[1],c=r[2],s=r[3],f=s*a+i*e-c*u,h=s*u+c*a-o*e,M=s*e+o*u-i*a,l=-o*a-i*u-c*e;return t[0]=f*s+l*-o+h*-c-M*-i,t[1]=h*s+l*-i+M*-o-f*-c,t[2]=M*s+l*-c+f*-i-h*-o,t[3]=n[3],t},zero:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},str:function(t){return"vec4("+t[0].toString()+", "+t[1].toString()+", "+t[2].toString()+", "+t[3].toString()+")"},exactEquals:St,equals:function(t,a){var u=t[0],e=t[1],o=t[2],i=t[3],c=a[0],s=a[1],f=a[2],h=a[3];return Math.abs(u-c)<=r*n.max(1,Math.abs(u),Math.abs(c))&&Math.abs(e-s)<=r*n.max(1,Math.abs(e),Math.abs(s))&&Math.abs(o-f)<=r*n.max(1,Math.abs(o),Math.abs(f))&&Math.abs(i-h)<=r*n.max(1,Math.abs(i),Math.abs(h))},sub:qt,mul:At,div:_t,dist:wt,sqrDist:Ft,len:zt,sqrLen:Ot,forEach:jt});function Pt(){var t=new Float64Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Tt(t,n,r){r*=.5;var a=Math.sin(r);return t[0]=a*n[0],t[1]=a*n[1],t[2]=a*n[2],t[3]=Math.cos(r),t}function Dt(t,n,r){var a=n[0],u=n[1],e=n[2],o=n[3],i=r[0],c=r[1],s=r[2],f=r[3];return t[0]=a*f+o*i+u*s-e*c,t[1]=u*f+o*c+e*i-a*s,t[2]=e*f+o*s+a*c-u*i,t[3]=o*f-a*i-u*c-e*s,t}function It(t,n,r){r*=.5;var a=n[0],u=n[1],e=n[2],o=n[3],i=Math.sin(r),c=Math.cos(r);return t[0]=a*c+o*i,t[1]=u*c+e*i,t[2]=e*c-u*i,t[3]=o*c-a*i,t}function Lt(t,n,r){r*=.5;var a=n[0],u=n[1],e=n[2],o=n[3],i=Math.sin(r),c=Math.cos(r);return t[0]=a*c-e*i,t[1]=u*c+o*i,t[2]=e*c+a*i,t[3]=o*c-u*i,t}function Vt(t,n,r){r*=.5;var a=n[0],u=n[1],e=n[2],o=n[3],i=Math.sin(r),c=Math.cos(r);return t[0]=a*c+u*i,t[1]=u*c-a*i,t[2]=e*c+o*i,t[3]=o*c-e*i,t}function Qt(t,n){var r=n[0],a=n[1],u=n[2],e=n[3],o=Math.sqrt(r*r+a*a+u*u),i=Math.exp(e),c=o>0?i*Math.sin(o)/o:0;return t[0]=r*c,t[1]=a*c,t[2]=u*c,t[3]=i*Math.cos(o),t}function Zt(t,n){var r=n[0],a=n[1],u=n[2],e=n[3],o=Math.sqrt(r*r+a*a+u*u),i=o>0?Math.atan2(o,e)/o:0;return t[0]=r*i,t[1]=a*i,t[2]=u*i,t[3]=.5*Math.log(r*r+a*a+u*u+e*e),t}function Nt(t,n,a,u){var e,o,i,c,s,f=n[0],h=n[1],M=n[2],l=n[3],v=a[0],b=a[1],m=a[2],d=a[3];return(o=f*v+h*b+M*m+l*d)<0&&(o=-o,v=-v,b=-b,m=-m,d=-d),1-o>r?(e=Math.acos(o),i=Math.sin(e),c=Math.sin((1-u)*e)/i,s=Math.sin(u*e)/i):(c=1-u,s=u),t[0]=c*f+s*v,t[1]=c*h+s*b,t[2]=c*M+s*m,t[3]=c*l+s*d,t}function Xt(t,n){var r,a=n[0]+n[4]+n[8];if(a>0)r=Math.sqrt(a+1),t[3]=.5*r,r=.5/r,t[0]=(n[5]-n[7])*r,t[1]=(n[6]-n[2])*r,t[2]=(n[1]-n[3])*r;else{var u=0;n[4]>n[0]&&(u=1),n[8]>n[3*u+u]&&(u=2);var e=(u+1)%3,o=(u+2)%3;r=Math.sqrt(n[3*u+u]-n[3*e+e]-n[3*o+o]+1),t[u]=.5*r,r=.5/r,t[3]=(n[3*e+o]-n[3*o+e])*r,t[e]=(n[3*e+u]+n[3*u+e])*r,t[o]=(n[3*o+u]+n[3*u+o])*r}return t}var Yt=ot,kt=it,Bt=ct,Ut=st,Gt=ft,Wt=Dt,Ct=vt,Ht=pt,Jt=xt,Kt=dt,$t=Kt,tn=gt,nn=tn,rn=yt,an=St;var un=L(),en=Q(1,0,0),on=Q(0,1,0),cn=function(t,n,r){var a=G(n,r);return a<-.999999?(W(un,en,n),tt(un)<1e-6&&W(un,on,n),U(un,un),Tt(t,un,Math.PI),t):a>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(W(un,n,r),t[0]=un[0],t[1]=un[1],t[2]=un[2],t[3]=1+a,rn(t,t))},sn=Pt(),fn=Pt(),hn=function(t,n,r,a,u,e){return Nt(sn,n,u,e),Nt(fn,r,a,e),Nt(t,sn,fn,2*e*(1-e)),t},Mn=m(),ln=function(t,n,r,a){return Mn[0]=r[0],Mn[3]=r[1],Mn[6]=r[2],Mn[1]=a[0],Mn[4]=a[1],Mn[7]=a[2],Mn[2]=-n[0],Mn[5]=-n[1],Mn[8]=-n[2],rn(t,Xt(t,Mn))},vn=Object.freeze({__proto__:null,create:Pt,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},setAxisAngle:Tt,getAxisAngle:function(t,n){var a=2*Math.acos(n[3]),u=Math.sin(a/2);return u>r?(t[0]=n[0]/u,t[1]=n[1]/u,t[2]=n[2]/u):(t[0]=1,t[1]=0,t[2]=0),a},getAngle:function(t,n){var r=Ht(t,n);return Math.acos(2*r*r-1)},multiply:Dt,rotateX:It,rotateY:Lt,rotateZ:Vt,calculateW:function(t,n){var r=n[0],a=n[1],u=n[2];return t[0]=r,t[1]=a,t[2]=u,t[3]=Math.sqrt(Math.abs(1-r*r-a*a-u*u)),t},exp:Qt,ln:Zt,pow:function(t,n,r){return Zt(t,n),Ct(t,t,r),Qt(t,t),t},slerp:Nt,random:function(t){var n=a(),r=a(),u=a(),e=Math.sqrt(1-n),o=Math.sqrt(n);return t[0]=e*Math.sin(2*Math.PI*r),t[1]=e*Math.cos(2*Math.PI*r),t[2]=o*Math.sin(2*Math.PI*u),t[3]=o*Math.cos(2*Math.PI*u),t},invert:function(t,n){var r=n[0],a=n[1],u=n[2],e=n[3],o=r*r+a*a+u*u+e*e,i=o?1/o:0;return t[0]=-r*i,t[1]=-a*i,t[2]=-u*i,t[3]=e*i,t},conjugate:function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t},fromMat3:Xt,fromEuler:function(t,n,r,a,u){void 0===u&&(u="zyx");var e=Math.PI/360;n*=e,a*=e,r*=e;var o=Math.sin(n),i=Math.cos(n),c=Math.sin(r),s=Math.cos(r),f=Math.sin(a),h=Math.cos(a);if("xyz"===u)t[0]=o*s*h+i*c*f,t[1]=i*c*h-o*s*f,t[2]=i*s*f+o*c*h,t[3]=i*s*h-o*c*f;else if("xzy"===u)t[0]=o*s*h-i*c*f,t[1]=i*c*h-o*s*f,t[2]=i*s*f+o*c*h,t[3]=i*s*h+o*c*f;else if("yxz"===u)t[0]=o*s*h+i*c*f,t[1]=i*c*h-o*s*f,t[2]=i*s*f-o*c*h,t[3]=i*s*h+o*c*f;else if("yzx"===u)t[0]=o*s*h+i*c*f,t[1]=i*c*h+o*s*f,t[2]=i*s*f-o*c*h,t[3]=i*s*h-o*c*f;else if("zxy"===u)t[0]=o*s*h-i*c*f,t[1]=i*c*h+o*s*f,t[2]=i*s*f+o*c*h,t[3]=i*s*h-o*c*f;else{if("zyx"!==u)throw new Error("Unknown angle order "+u);t[0]=o*s*h-i*c*f,t[1]=i*c*h+o*s*f,t[2]=i*s*f-o*c*h,t[3]=i*s*h+o*c*f}return t},str:function(t){return"quat("+t[0].toString()+", "+t[1].toString()+", "+t[2].toString()+", "+t[3].toString()+")"},clone:Yt,fromValues:kt,copy:Bt,set:Ut,add:Gt,mul:Wt,scale:Ct,dot:Ht,lerp:Jt,length:Kt,len:$t,squaredLength:tn,sqrLen:nn,normalize:rn,exactEquals:an,equals:function(t,n){return Math.abs(pt(t,n))>=1-r},rotationTo:cn,sqlerp:hn,setAxes:ln});function bn(t,n,r){var a=.5*r[0],u=.5*r[1],e=.5*r[2],o=n[0],i=n[1],c=n[2],s=n[3];return t[0]=o,t[1]=i,t[2]=c,t[3]=s,t[4]=a*s+u*c-e*i,t[5]=u*s+e*o-a*c,t[6]=e*s+a*i-u*o,t[7]=-a*o-u*i-e*c,t}function mn(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t}var dn=Bt;var gn=Bt;function yn(t,n,r){var a=n[0],u=n[1],e=n[2],o=n[3],i=r[4],c=r[5],s=r[6],f=r[7],h=n[4],M=n[5],l=n[6],v=n[7],b=r[0],m=r[1],d=r[2],g=r[3];return t[0]=a*g+o*b+u*d-e*m,t[1]=u*g+o*m+e*b-a*d,t[2]=e*g+o*d+a*m-u*b,t[3]=o*g-a*b-u*m-e*d,t[4]=a*f+o*i+u*s-e*c+h*g+v*b+M*d-l*m,t[5]=u*f+o*c+e*i-a*s+M*g+v*m+l*b-h*d,t[6]=e*f+o*s+a*c-u*i+l*g+v*d+h*m-M*b,t[7]=o*f-a*i-u*c-e*s+v*g-h*b-M*m-l*d,t}var pn=yn;var xn=Ht;var Sn=Kt,qn=Sn,An=tn,_n=An;var wn=Object.freeze({__proto__:null,create:function(){var t=changetype(new Float64Array(8));return t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[3]=1,t},clone:function(t){var n=changetype(new Float64Array(8));return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n},fromValues:function(t,n,r,a,u,e,o,i){var c=changetype(new Float64Array(8));return c[0]=t,c[1]=n,c[2]=r,c[3]=a,c[4]=u,c[5]=e,c[6]=o,c[7]=i,c},fromRotationTranslationValues:function(t,n,r,a,u,e,o){var i=changetype(new Float64Array(8));i[0]=t,i[1]=n,i[2]=r,i[3]=a;var c=.5*u,s=.5*e,f=.5*o;return i[4]=c*a+s*r-f*n,i[5]=s*a+f*t-c*r,i[6]=f*a+c*n-s*t,i[7]=-c*t-s*n-f*r,i},fromRotationTranslation:bn,fromTranslation:function(t,n){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*n[0],t[5]=.5*n[1],t[6]=.5*n[2],t[7]=0,t},fromRotation:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},fromMat4:function(t,n){var r=Pt();z(r,n);var a=new Float64Array(3);return w(a,n),bn(t,r,a),t},copy:mn,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},set:function(t,n,r,a,u,e,o,i,c){return t[0]=n,t[1]=r,t[2]=a,t[3]=u,t[4]=e,t[5]=o,t[6]=i,t[7]=c,t},getReal:dn,getDual:function(t,n){return t[0]=n[4],t[1]=n[5],t[2]=n[6],t[3]=n[7],t},setReal:gn,setDual:function(t,n){return t[4]=n[0],t[5]=n[1],t[6]=n[2],t[7]=n[3],t},getTranslation:function(t,n){var r=n[4],a=n[5],u=n[6],e=n[7],o=-n[0],i=-n[1],c=-n[2],s=n[3];return t[0]=2*(r*s+e*o+a*c-u*i),t[1]=2*(a*s+e*i+u*o-r*c),t[2]=2*(u*s+e*c+r*i-a*o),t},translate:function(t,n,r){var a=n[0],u=n[1],e=n[2],o=n[3],i=.5*r[0],c=.5*r[1],s=.5*r[2],f=n[4],h=n[5],M=n[6],l=n[7];return t[0]=a,t[1]=u,t[2]=e,t[3]=o,t[4]=o*i+u*s-e*c+f,t[5]=o*c+e*i-a*s+h,t[6]=o*s+a*c-u*i+M,t[7]=-a*i-u*c-e*s+l,t},rotateX:function(t,n,r){var a=-n[0],u=-n[1],e=-n[2],o=n[3],i=n[4],c=n[5],s=n[6],f=n[7],h=i*o+f*a+c*e-s*u,M=c*o+f*u+s*a-i*e,l=s*o+f*e+i*u-c*a,v=f*o-i*a-c*u-s*e;return It(t,n,r),a=t[0],u=t[1],e=t[2],o=t[3],t[4]=h*o+v*a+M*e-l*u,t[5]=M*o+v*u+l*a-h*e,t[6]=l*o+v*e+h*u-M*a,t[7]=v*o-h*a-M*u-l*e,t},rotateY:function(t,n,r){var a=-n[0],u=-n[1],e=-n[2],o=n[3],i=n[4],c=n[5],s=n[6],f=n[7],h=i*o+f*a+c*e-s*u,M=c*o+f*u+s*a-i*e,l=s*o+f*e+i*u-c*a,v=f*o-i*a-c*u-s*e;return Lt(t,n,r),a=t[0],u=t[1],e=t[2],o=t[3],t[4]=h*o+v*a+M*e-l*u,t[5]=M*o+v*u+l*a-h*e,t[6]=l*o+v*e+h*u-M*a,t[7]=v*o-h*a-M*u-l*e,t},rotateZ:function(t,n,r){var a=-n[0],u=-n[1],e=-n[2],o=n[3],i=n[4],c=n[5],s=n[6],f=n[7],h=i*o+f*a+c*e-s*u,M=c*o+f*u+s*a-i*e,l=s*o+f*e+i*u-c*a,v=f*o-i*a-c*u-s*e;return Vt(t,n,r),a=t[0],u=t[1],e=t[2],o=t[3],t[4]=h*o+v*a+M*e-l*u,t[5]=M*o+v*u+l*a-h*e,t[6]=l*o+v*e+h*u-M*a,t[7]=v*o-h*a-M*u-l*e,t},rotateByQuatAppend:function(t,n,r){var a=r[0],u=r[1],e=r[2],o=r[3],i=n[0],c=n[1],s=n[2],f=n[3];return t[0]=i*o+f*a+c*e-s*u,t[1]=c*o+f*u+s*a-i*e,t[2]=s*o+f*e+i*u-c*a,t[3]=f*o-i*a-c*u-s*e,i=n[4],c=n[5],s=n[6],f=n[7],t[4]=i*o+f*a+c*e-s*u,t[5]=c*o+f*u+s*a-i*e,t[6]=s*o+f*e+i*u-c*a,t[7]=f*o-i*a-c*u-s*e,t},rotateByQuatPrepend:function(t,n,r){var a=n[0],u=n[1],e=n[2],o=n[3],i=r[0],c=r[1],s=r[2],f=r[3];return t[0]=a*f+o*i+u*s-e*c,t[1]=u*f+o*c+e*i-a*s,t[2]=e*f+o*s+a*c-u*i,t[3]=o*f-a*i-u*c-e*s,i=r[4],c=r[5],s=r[6],f=r[7],t[4]=a*f+o*i+u*s-e*c,t[5]=u*f+o*c+e*i-a*s,t[6]=e*f+o*s+a*c-u*i,t[7]=o*f-a*i-u*c-e*s,t},rotateAroundAxis:function(t,a,u,e){if(Math.abs(e)<r)return mn(t,a);var o=n.hypot(u[0],u[1],u[2]);e*=.5;var i=Math.sin(e),c=i*u[0]/o,s=i*u[1]/o,f=i*u[2]/o,h=Math.cos(e),M=a[0],l=a[1],v=a[2],b=a[3];t[0]=M*h+b*c+l*f-v*s,t[1]=l*h+b*s+v*c-M*f,t[2]=v*h+b*f+M*s-l*c,t[3]=b*h-M*c-l*s-v*f;var m=a[4],d=a[5],g=a[6],y=a[7];return t[4]=m*h+y*c+d*f-g*s,t[5]=d*h+y*s+g*c-m*f,t[6]=g*h+y*f+m*s-d*c,t[7]=y*h-m*c-d*s-g*f,t},add:function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t},multiply:yn,mul:pn,scale:function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t},dot:xn,lerp:function(t,n,r,a){var u=1-a;return xn(n,r)<0&&(a=-a),t[0]=n[0]*u+r[0]*a,t[1]=n[1]*u+r[1]*a,t[2]=n[2]*u+r[2]*a,t[3]=n[3]*u+r[3]*a,t[4]=n[4]*u+r[4]*a,t[5]=n[5]*u+r[5]*a,t[6]=n[6]*u+r[6]*a,t[7]=n[7]*u+r[7]*a,t},invert:function(t,n){var r=An(n);return t[0]=-n[0]/r,t[1]=-n[1]/r,t[2]=-n[2]/r,t[3]=n[3]/r,t[4]=-n[4]/r,t[5]=-n[5]/r,t[6]=-n[6]/r,t[7]=n[7]/r,t},conjugate:function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t[4]=-n[4],t[5]=-n[5],t[6]=-n[6],t[7]=n[7],t},length:Sn,len:qn,squaredLength:An,sqrLen:_n,normalize:function(t,n){var r=An(n);if(r>0){r=Math.sqrt(r);var a=n[0]/r,u=n[1]/r,e=n[2]/r,o=n[3]/r,i=n[4],c=n[5],s=n[6],f=n[7],h=a*i+u*c+e*s+o*f;t[0]=a,t[1]=u,t[2]=e,t[3]=o,t[4]=(i-a*h)/r,t[5]=(c-u*h)/r,t[6]=(s-e*h)/r,t[7]=(f-o*h)/r}return t},str:function(t){return"quat2("+t[0].toString()+", "+t[1].toString()+", "+t[2].toString()+", "+t[3].toString()+", "+t[4].toString()+", "+t[5].toString()+", "+t[6].toString()+", "+t[7].toString()+")"},exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]},equals:function(t,a){var u=t[0],e=t[1],o=t[2],i=t[3],c=t[4],s=t[5],f=t[6],h=t[7],M=a[0],l=a[1],v=a[2],b=a[3],m=a[4],d=a[5],g=a[6],y=a[7];return Math.abs(u-M)<=r*n.max(1,Math.abs(u),Math.abs(M))&&Math.abs(e-l)<=r*n.max(1,Math.abs(e),Math.abs(l))&&Math.abs(o-v)<=r*n.max(1,Math.abs(o),Math.abs(v))&&Math.abs(i-b)<=r*n.max(1,Math.abs(i),Math.abs(b))&&Math.abs(c-m)<=r*n.max(1,Math.abs(c),Math.abs(m))&&Math.abs(s-d)<=r*n.max(1,Math.abs(s),Math.abs(d))&&Math.abs(f-g)<=r*n.max(1,Math.abs(f),Math.abs(g))&&Math.abs(h-y)<=r*n.max(1,Math.abs(h),Math.abs(y))}});function Fn(){var t=new Float64Array(2);return t[0]=0,t[1]=0,t}function zn(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t}function On(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t}function Rn(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t}function jn(t,r){var a=r[0]-t[0],u=r[1]-t[1];return n.hypot(a,u)}function En(t,n){var r=n[0]-t[0],a=n[1]-t[1];return r*r+a*a}function Pn(t){var n=t[0],r=t[1];return Math.hypot(n,r)}function Tn(t){var n=t[0],r=t[1];return n*n+r*r}var Dn=Pn,In=zn,Ln=On,Vn=Rn,Qn=jn,Zn=En,Nn=Tn,Xn=Fn(),Yn=function(t,r,a,u,e,o){var i,c;for(r||(r=2),a||(a=0),c=u?n.min(u*r+a,t.length):t.length,i=a;i<c;i+=r)Xn[0]=t[i],Xn[1]=t[i+1],e(Xn,Xn,o),t[i]=Xn[0],t[i+1]=Xn[1];return t},kn=Object.freeze({__proto__:null,create:Fn,clone:function(t){var n=new Float64Array(2);return n[0]=t[0],n[1]=t[1],n},fromValues:function(t,n){var r=new Float64Array(2);return r[0]=t,r[1]=n,r},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t},set:function(t,n,r){return t[0]=n,t[1]=r,t},add:function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t},subtract:zn,multiply:On,divide:Rn,ceil:function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t},floor:function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t},min:function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t},max:function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t},round:function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t},scale:function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t},scaleAndAdd:function(t,n,r,a){return t[0]=n[0]+r[0]*a,t[1]=n[1]+r[1]*a,t},distance:jn,squaredDistance:En,length:Pn,squaredLength:Tn,negate:function(t,n){return t[0]=-n[0],t[1]=-n[1],t},inverse:function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t},normalize:function(t,n){var r=n[0],a=n[1],u=r*r+a*a;return u>0&&(u=1/Math.sqrt(u)),t[0]=n[0]*u,t[1]=n[1]*u,t},dot:function(t,n){return t[0]*n[0]+t[1]*n[1]},cross:function(t,n,r){var a=n[0]*r[1]-n[1]*r[0];return t[0]=t[1]=0,t[2]=a,t},lerp:function(t,n,r,a){var u=n[0],e=n[1];return t[0]=u+a*(r[0]-u),t[1]=e+a*(r[1]-e),t},random:function(t,n){n=n||1;var r=2*a()*Math.PI;return t[0]=Math.cos(r)*n,t[1]=Math.sin(r)*n,t},transformMat2:function(t,n,r){var a=n[0],u=n[1];return t[0]=r[0]*a+r[2]*u,t[1]=r[1]*a+r[3]*u,t},transformMat2d:function(t,n,r){var a=n[0],u=n[1];return t[0]=r[0]*a+r[2]*u+r[4],t[1]=r[1]*a+r[3]*u+r[5],t},transformMat3:function(t,n,r){var a=n[0],u=n[1];return t[0]=r[0]*a+r[3]*u+r[6],t[1]=r[1]*a+r[4]*u+r[7],t},transformMat4:function(t,n,r){var a=n[0],u=n[1];return t[0]=r[0]*a+r[4]*u+r[12],t[1]=r[1]*a+r[5]*u+r[13],t},rotate:function(t,n,r,a){var u=n[0]-r[0],e=n[1]-r[1],o=Math.sin(a),i=Math.cos(a);return t[0]=u*i-e*o+r[0],t[1]=u*o+e*i+r[1],t},angle:function(t,n){var r=t[0],a=t[1],u=n[0],e=n[1],o=Math.sqrt(r*r+a*a)*Math.sqrt(u*u+e*e),i=o&&(r*u+a*e)/o;return Math.acos(Math.min(Math.max(i,-1),1))},zero:function(t){return t[0]=0,t[1]=0,t},str:function(t){return"vec2("+t[0].toString()+", "+t[1].toString()+")"},exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]},equals:function(t,a){var u=t[0],e=t[1],o=a[0],i=a[1];return Math.abs(u-o)<=r*n.max(1,Math.abs(u),Math.abs(o))&&Math.abs(e-i)<=r*n.max(1,Math.abs(e),Math.abs(i))},len:Dn,sub:In,mul:Ln,div:Vn,dist:Qn,sqrDist:Zn,sqrLen:Nn,forEach:Yn});t.glMatrix=e,t.mat2=f,t.mat2d=b,t.mat3=x,t.mat4=I,t.quat=vn,t.quat2=wn,t.vec2=kn,t.vec3=ut,t.vec4=Et,Object.defineProperty(t,"__esModule",{value:!0})}));
